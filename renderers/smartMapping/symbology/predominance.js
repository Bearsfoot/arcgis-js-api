// COPYRIGHT Â© 2020 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.15/esri/copyright.txt for details.

define(["require","exports","../../../core/tsSupport/assignHelper","../../../core/tsSupport/extendsHelper","../../../Color","./size","./support/colors","./support/SymbologyBase","./support/utils"],(function(e,o,a,n,r,t,i,m,c){var p={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},l={default:{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",schemes:{point:{light:{common:{noDataColor:"#aaaaaa",outline:p.light,size:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:"#aaaaaa",outline:p.darker,size:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polyline:{light:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}},polygon:{light:{common:{noDataColor:"#aaaaaa",outline:p.light,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]},dark:{common:{noDataColor:"#aaaaaa",outline:p.dark,fillOpacity:.8,markerSize:"8px"},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"]}}}}};function s(e,o,a,n){var t=i[o];if(t){var m,p=t[e.numColors]||t.stops,l="mesh"!==e.geometryType&&e.worldScale?e.view:null;switch(e.geometryType){case"point":case"multipoint":var s=a;return function(e,o){return{name:e.name,tags:e.tags.slice(),colors:e.colors.map((function(e){return new r(e)})),noDataColor:new r(e.noDataColor),outline:{color:new r(e.outline.color),width:e.outline.width},size:o?c.toWorldScale(e.size,o):e.size,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:t.name,tags:t.tags,colors:p,noDataColor:s.noDataColor,opacity:1,sizeScheme:n,outline:s.outline,size:s.size},l);case"polyline":var d=a;return function(e,o){return{name:e.name,tags:e.tags.slice(),colors:e.colors.map((function(e){return new r(e)})),noDataColor:new r(e.noDataColor),width:o?c.toWorldScale(e.width,o):e.width,sizeScheme:e.sizeScheme,opacity:e.opacity}}({name:t.name,tags:t.tags,colors:p,noDataColor:d.noDataColor,opacity:1,sizeScheme:n,width:d.width},l);case"polygon":var u=a,h=n;return h&&h.marker&&null!=u.markerSize&&(h.marker.size=u.markerSize),function(e,o){var a=e.sizeScheme;return a.marker.size=o?c.toWorldScale(a.marker.size,o):a.marker.size,{name:e.name,tags:e.tags.slice(),colors:e.colors.map((function(e){return new r(e)})),noDataColor:new r(e.noDataColor),outline:{color:new r(e.outline.color),width:e.outline.width},sizeScheme:a,opacity:e.opacity}}({name:t.name,tags:t.tags,colors:p,noDataColor:u.noDataColor,opacity:u.fillOpacity,outline:u.outline,sizeScheme:h},l);case"mesh":var y=a,v={name:t.name,tags:t.tags,colors:p,noDataColor:y.noDataColor,opacity:y.fillOpacity};return{name:(m=v).name,tags:m.tags.slice(),colors:m.colors.map((function(e){return new r(e)})),noDataColor:new r(m.noDataColor),opacity:m.opacity};default:return}}}return new(function(e){function o(){return e.call(this,{themeDictionary:l})||this}return n(o,e),o.prototype.getSchemes=function(e){var o=this.getRawSchemes({theme:"default",basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme});if(o){var a=o.schemesInfo,n=o.basemapId,r=o.basemapTheme,i=a.common,m=t.getSchemes({basemap:e.basemap,geometryType:e.geometryType,worldScale:e.worldScale,view:e.view}),c=m&&m.primaryScheme;return{primaryScheme:s(e,a.primary,i,c),secondarySchemes:a.secondary.map((function(o){return s(e,o,i,c)})).filter(Boolean),basemapId:n,basemapTheme:r}}},o.prototype.getSchemeByName=function(e){return this.filterSchemesByName(e)},o.prototype.getSchemesByTag=function(e){return this.filterSchemesByTag(e)},o.prototype.cloneScheme=function(e){if(e){var o=a({},e);return o.colors=o.colors.map((function(e){return new r(e)})),o.noDataColor&&(o.noDataColor=new r(o.noDataColor)),"outline"in o&&o.outline&&(o.outline={color:o.outline.color&&new r(o.outline.color),width:o.outline.width}),"sizeScheme"in o&&o.sizeScheme&&(o.sizeScheme=t.cloneScheme(o.sizeScheme)),o}},o}(m))}));