// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.

define(["dojo/_base/array","dojo/on","dojo/aspect","dijit/form/Select","dijit/form/TextBox","dijit/form/CheckBox","./common/dijit/URLInput","./editors/simpleEditors","./editors/DataFileEditor","./editors/RasterLayerEditor","./editors/SelectFeatureSetFromLayer","./editors/FieldEditor"],(function(e,t,a,r,o,i,d,l,u,n,p,s){var f,c,E={},m=[];return E.createEditor=function(t,i,y,S){var V,w=function(e,t,a){if(e.editorName&&e.dataType.indexOf("GPMultiValue")<0)return e.editorName;return"input"===t?function(e,t){return"GPMultiValue:GPFeatureRecordSetLayer"===e.dataType?"UnsupportEditor":e.dataType.indexOf("GPMultiValue")>-1&&e.choiceList&&e.choiceList.length>0?"MultiValueChooser":e.dataType.indexOf("GPMultiValue")>-1&&(!e.choiceList||0===e.choiceList.length)?"MultiValueEditor":"GPLong"===e.dataType?"LongNumberTextBox":"GPDouble"===e.dataType?"DoubleNumberTextBox":"GPString"===e.dataType?e.choiceList&&e.choiceList.length>0?"Select":"TextBox":"GPBoolean"===e.dataType?"CheckBox":"GPLinearUnit"===e.dataType?"LinerUnitEditor":"GPDate"===e.dataType?"DateTimeEditor":"GPDataFile"===e.dataType?"DataFileEditor":"GPRasterDataLayer"===e.dataType?"RasterLayerEditor":"GPRecordSet"===e.dataType?"SimpleJsonEditor":"GPFeatureRecordSetLayer"===e.dataType?"setting"===t?"FeatureSetEditorChooser":"draw"===e.featureSetMode?"SelectFeatureSetFromDraw":"layers"===e.featureSetMode?"SelectFeatureSetFromLayer":"url"===e.featureSetMode?"SelectFeatureSetFromUrl":"file"===e.featureSetMode?"SelectFeatureSetFromFile":"UnsupportEditor":"Field"===e.dataType?"Field":"UnsupportEditor"}(e,a):function(e){return"GPFeatureRecordSetLayer"===e.dataType?"FeatureSetResultEditor":"GPRecordSet"===e.dataType?"RecordSetEditor":"MapServiceLayer"===e.dataType?"MapServiceLayer":"ShowMessage"}(e)}(t,i,y),L={param:t,widgetUID:S?S.uid:void 0,widget:S?S.widget:void 0,config:S?S.config:void 0,appConfig:S?S.appConfig:void 0,map:f,nls:c,context:y,editorManager:E,style:{width:"100%"}};if("UnsupportEditor"===w)L.message="type "+t.dataType+" is not supported for now.",V=new l.UnsupportEditor(L);else if("ShowMessage"===w)L.message=function(e){var t;t="GPRecordSet"===e.dataType?"table":"GPDataFile"===e.dataType||"GPRasterDataLayer"===e.dataType?"link":"text";return t}(t),V=new l.UnsupportEditor(L);else if("MapServiceLayer"===w)L.message=c.useResultMapService,V=new l.UnsupportEditor(L);else if("MultiValueChooser"===w)V=new l.MultiValueChooser(L);else if("MultiValueEditor"===w)V=new l.MultiValueEditor(L);else if("LongNumberTextBox"===w)V=new l.LongNumberEditor(L);else if("DoubleNumberTextBox"===w)V=new l.DoubleNumberEditor(L);else if("Select"===w){var T=[];void 0!==t.defaultValue&&""!==t.defaultValue||T.push({value:"",label:""}),T=T.concat(e.map(t.choiceList,(function(e){return{label:e,value:e}}))),L.gEditor=new r({options:T,value:void 0===t.defaultValue||""===t.defaultValue?"":t.defaultValue}),L.editorName="Select",V=new l.GeneralEditorWrapperEditor(L)}else"TextBox"===w?(L.gEditor=new o({value:void 0===t.defaultValue?"":t.defaultValue}),V=new l.GeneralEditorWrapperEditor(L)):"CheckBox"===w?V=new l.BooleanEditor(L):"LinerUnitEditor"===w?V=new l.LinerUnitEditor(L):"DateTimeEditor"===w?V=new l.DateTimeEditor(L):"URLInput"===w?(L.gEditor=new d({value:void 0===t.defaultValue?"":t.defaultValue}),V=new l.GeneralEditorWrapperEditor(L)):"ObjectUrlEditor"===w?(t.defaultValue&&"string"==typeof t.defaultValue&&(L.value=t.defaultValue),V=new l.ObjectUrlEditor(L)):"SimpleJsonEditor"===w?(t.defaultValue&&(L.value=t.defaultValue),V=new l.SimpleJsonEditor(L)):"DataFileEditor"===w?(t.defaultValue&&(L.value=t.defaultValue),V=new u(L)):"RasterLayerEditor"===w?(t.defaultValue&&(L.value=t.defaultValue),V=new n(L)):"SelectFeatureSetFromLayer"===w?(t.defaultValue&&(L.value=t.defaultValue),V=new p(L)):"GetUrlObjectFromLayer"===w?(t.defaultValue&&(L.value=t.defaultValue),V=new l.GetUrlObjectFromLayer(L)):"Field"===w?(t.defaultValue&&(L.value=t.defaultValue),V=new s(L)):(L.message="wrong editorName."+w,V=new l.UnsupportEditor(L));return t.editorDependParamName&&(V.dependParam=t.editorDependParamName),a.before(V,"destroy",(function(){m.splice(m.indexOf(V),1)})),V.dependParam&&e.forEach(m,(function(e){e.param.name===V.dependParam&&V.update(e.getValue())})),m.push(V),V},E.setMap=function(e){f=e},E.setNls=function(e){c=e},E}));